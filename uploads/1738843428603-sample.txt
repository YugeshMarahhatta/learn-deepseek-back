<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parse Nested JSON</title>
</head>
<body>
    <h1>Parsed JSON Data</h1>
    <pre id="jsonOutput"></pre>

  <script>
    const inputJSON = `{"__modelData":{"model_name":"SimpleTest","model_id":"SIM001","model_visual":"2","model_trackerSelect":"1","model_ctxSelect":"1","keyFigGrid":[{"Name":"Actual","type":"1","formula":"","isDefault":true,"isSim":true},{"Name":"Target","type":"1","formula":"","isDefault":true,"isSim":true},{"Name":"Budget","type":"1","formula":"","isDefault":true,"isSim":true},{"Name":"Forecast","type":"1","formula":"","isDefault":false,"isSim":true},{"Name":"Benchmark","type":"1","formula":"","isDefault":false,"isSim":true}],"viewsGrid":[{"Name":"Concerto View","isEnabled":true,"isDefault":true},{"Name":"Worksheet View","isEnabled":true,"isDefault":false},{"Name":"Dashboard View","isEnabled":true,"isDefault":false}],"constDefGrid":[{"name":"Min. Constraint","isMin":true,"isDefault":false,"isSim":false},{"name":"Max. Constraint","isMax":true,"isDefault":false,"isSim":false}],"model_kpiSelect":"Actual","model_baseSelect":"Budget","model_sparkLine":"Actual","model_sparkBar":"Target","model_attrSrc":"2","model_timeDim":"4","model_timeFromYear":2025,"model_timeToYear":2029,"model_defZoom":75,"model_maxTilesRow":"0","isDecarbonisation":false,"model_timeVar":"1"},"__unassigned__":{"node_name":"Unassigned","global-search-bar":"","node_unit":"","node_unit_desc":"","node_def":"","node_formula_desc":"","node_prefix":"","node_suffix":"","node_scaling":"1","node_decimals":"1","node_defColor":"1","node_bodyColor":"1","node_subtitle":"","node_image_name":"","node_image_id":"","node_headerClkEvt":"1","node_customHeaderClkCode":"","node_imageClkEvt":"1","node_imageClkModelId":"","node_customImgClkCode":"","node_population":"","rule_Actual":"2","rule_Target":"2","rule_Budget":"2","rule_Forecast":"2","rule_Benchmark":"2","node_calcType":"1","formulaTxt":"","advancedFormulaTxt":"","node_calcType_Actual":"1","formulaTxt_Actual":"","modelLinkage_Actual":"","key_fig_node_population_datasource_Actual":"","rule_idMappingTxtVal_Actual":"","powerBIRule_idMappingTxtVal_Actual":"","node_calcType_Target":"1","formulaTxt_Target":"","modelLinkage_Target":"","key_fig_node_population_datasource_Target":"","rule_idMappingTxtVal_Target":"","powerBIRule_idMappingTxtVal_Target":"","node_calcType_Budget":"1","formulaTxt_Budget":"","modelLinkage_Budget":"","key_fig_node_population_datasource_Budget":"","rule_idMappingTxtVal_Budget":"","powerBIRule_idMappingTxtVal_Budget":"","node_calcType_Forecast":"1","formulaTxt_Forecast":"","modelLinkage_Forecast":"","key_fig_node_population_datasource_Forecast":"","rule_idMappingTxtVal_Forecast":"","powerBIRule_idMappingTxtVal_Forecast":"","node_calcType_Benchmark":"1","formulaTxt_Benchmark":"","modelLinkage_Benchmark":"","key_fig_node_population_datasource_Benchmark":"","rule_idMappingTxtVal_Benchmark":"","powerBIRule_idMappingTxtVal_Benchmark":"","formulaTxt_key_fig":"","modelLinkage":"","node_population_datasource":"","rule_idMappingTxtVal":"","key_fig_node_population_datasource":"","rule_idMappingTxtVal_key_fig":"","powerBIRule_idMappingTxtVal":"","powerBIRule_idMappingTxtVal_key_fig":"","node_trafficCalcType":"2","traffic_baseSelect":"","trafficFormulaTxt":"","greenOp":"1","greenVal":"","greenVal1":"","greenVal2":"","yellowOp":"1","yellowVal":"","yellowVal1":"","yellowVal2":"","redOp":"1","redVal":"","redVal1":"","redVal2":"","greyOp":"1","greyVal":"","greyVal1":"","greyVal2":"","blueOp":"1","blueVal":"","blueVal1":"","blueVal2":"","sim_Actual":"1","sim_Target":"1","sim_Budget":"1","sim_Forecast":"1","sim_Benchmark":"1","sim_low":"","sim_high":"","sim_inc":"","keyFigName":"","keyFigType":"1","keyFigFormula":"","constDefName":"","tileName":"","chartModelSel":"","chartSubtype":"","timeSeriesList":"","metricDocTitle":"","metricDocLink":"","modelId":"","modelName":"","modelType":"1","modelSrcSys":"","modelTimeDim":"1","modelTimeFromYear":"","modelTimeToYear":"","node_collapsed":false,"node_timeAggrSum":true,"node_timeAggrAvg":false,"node_calcAfterAggr":false,"node_calcAfterAggr_Actual":false,"rule_idMappingRule_Actual":false,"rule_idMappingRuleText_Actual":false,"powerBIRule_idMappingRuleID_Actual":false,"powerBIRule_idMappingRuleText_Actual":false,"node_calcAfterAggr_Target":false,"rule_idMappingRule_Target":false,"rule_idMappingRuleText_Target":false,"powerBIRule_idMappingRuleID_Target":false,"powerBIRule_idMappingRuleText_Target":false,"node_calcAfterAggr_Budget":false,"rule_idMappingRule_Budget":false,"rule_idMappingRuleText_Budget":false,"powerBIRule_idMappingRuleID_Budget":false,"powerBIRule_idMappingRuleText_Budget":false,"node_calcAfterAggr_Forecast":false,"rule_idMappingRule_Forecast":false,"rule_idMappingRuleText_Forecast":false,"powerBIRule_idMappingRuleID_Forecast":false,"powerBIRule_idMappingRuleText_Forecast":false,"node_calcAfterAggr_Benchmark":false,"rule_idMappingRule_Benchmark":false,"rule_idMappingRuleText_Benchmark":false,"powerBIRule_idMappingRuleID_Benchmark":false,"powerBIRule_idMappingRuleText_Benchmark":false,"rule_idMappingRuleID":true,"rule_idMappingRuleText":false,"rule_idMappingRuleID_key_fig":false,"rule_idMappingRuleText_key_fig":false,"powerBIRule_idMappingRuleID":true,"powerBIRule_idMappingRuleText":false,"powerBIRule_idMappingRuleID_key_fig":false,"powerBIRule_idMappingRuleText_key_fig":false,"node_showInGrid":false,"node_allowConst":false,"isKeyFigToggled":false,"isKeyFigSim":false,"constTypeMin":false,"constTypeMax":false,"constToggle":false,"constSim":false,"useStackNodeChartConfig":false,"metricTS":false,"keyFigTS":false,"modelProp":false,"cpyMetricsData":false,"advancedFormulaTxt_Actual":"","advancedFormulaTxt_Target":"","advancedFormulaTxt_Budget":"","advancedFormulaTxt_Forecast":"","advancedFormulaTxt_Benchmark":"","population_set":true},"hierJSTreeData":[{"id":"SIM001_001","text":"SIM001_001: SimpleTest","li_attr":{"id":"SIM001_001"},"a_attr":{"href":"#","id":"SIM001_001_anchor"},"data":{},"children":[{"id":"SIM001_003","text":"SIM001_003: Test-1_First_Metric","li_attr":{"id":"SIM001_003"},"a_attr":{"href":"#","id":"SIM001_003_anchor"},"data":{},"children":[],"type":"default","isProject":false},{"id":"SIM001_002","text":"SIM001_002: Test-1_Second_Metric","li_attr":{"id":"SIM001_002"},"a_attr":{"href":"#","id":"SIM001_002_anchor"},"data":{},"children":[],"type":"default","isProject":""}],"type":"default","isProject":""},{"id":"__unassigned__","text":"Unassigned","type":"unassigned","children":[]}],"SIM001_001":{"node_scaling":"1k","node_decimals":"0","node_collapsed":true,"node_defColor":"1","node_bodyColor":"1","node_prefix":"","node_suffix":"","node_timeAggrSum":true,"node_timeAggrAvg":false,"node_trafficCalcType":"3","node_showInGrid":true,"node_population":"2","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_name":"SimpleTest","advancedFormulaTxt":"TM2001.TM2001_001 - TM2001.TM2001_001","node_calcType":"3","node_imageClkEvt":"1","node_document_quick_access":false},"SIM001_002":{"node_scaling":"1.1m","node_decimals":"1","node_collapsed":false,"node_defColor":"5","node_bodyColor":"2","node_timeAggrSum":false,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"2","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_prefix":"Rs.","node_suffix":"Rs.","node_timeAggrAvg":true,"node_subtitle":"Test Subtitle","node_image_name":"gemco test 6.JPG","node_image_id":"5724342150234112","node_imageClkEvt":"1","node_name":"Test-1_Second_Metric","advancedFormulaTxt":"SUM( TM2001.TM2001_002,SIM001_003 )","node_calcType":"3","node_calcAfterAggr":true},"SIM001_0021":{"node_scaling":"1.1m","node_decimals":"1","node_collapsed":false,"node_defColor":"5","node_bodyColor":"2","node_timeAggrSum":false,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_prefix":"Rs.","node_suffix":"Rs.","node_timeAggrAvg":true,"node_subtitle":"Test Subtitle","node_image_name":"gemco test 6.JPG","node_image_id":"5724342150234112","node_imageClkEvt":"1","node_name":"Avg. MAC"},"SIM001_0022":{"node_scaling":"1.1m","node_decimals":"1","node_collapsed":false,"node_defColor":"5","node_bodyColor":"2","node_timeAggrSum":false,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_prefix":"Rs.","node_suffix":"Rs.","node_timeAggrAvg":true,"node_subtitle":"Test Subtitle","node_image_name":"gemco test 6.JPG","node_image_id":"5724342150234112","node_imageClkEvt":"1","node_name":"Total Abatement Potential"},"SIM001_0023":{"node_scaling":"1.1m","node_decimals":"1","node_collapsed":false,"node_defColor":"5","node_bodyColor":"2","node_timeAggrSum":false,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_prefix":"Rs.","node_suffix":"Rs.","node_timeAggrAvg":true,"node_subtitle":"Test Subtitle","node_image_name":"gemco test 6.JPG","node_image_id":"5724342150234112","node_imageClkEvt":"1","node_name":"CAPEX"},"SIM001_0024":{"node_scaling":"1.1m","node_decimals":"1","node_collapsed":false,"node_defColor":"5","node_bodyColor":"2","node_timeAggrSum":false,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_prefix":"Rs.","node_suffix":"Rs.","node_timeAggrAvg":true,"node_subtitle":"Test Subtitle","node_image_name":"gemco test 6.JPG","node_image_id":"5724342150234112","node_imageClkEvt":"1","node_name":"NPV"},"SIM001_003":{"node_scaling":"1k","node_decimals":"0","node_collapsed":true,"node_defColor":"1","node_bodyColor":"1","node_timeAggrSum":true,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"2","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_name":"Test-1_First_Metric","advancedFormulaTxt":"","node_calcType":"1","node_imageClkEvt":"1"},"SIM001_0031":{"node_scaling":"1k","node_decimals":"0","node_collapsed":true,"node_defColor":"1","node_bodyColor":"1","node_timeAggrSum":true,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_name":"Avg. MAC"},"SIM001_0032":{"node_scaling":"1k","node_decimals":"0","node_collapsed":true,"node_defColor":"1","node_bodyColor":"1","node_timeAggrSum":true,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_name":"Total Abatement Potential"},"SIM001_0033":{"node_scaling":"1k","node_decimals":"0","node_collapsed":true,"node_defColor":"1","node_bodyColor":"1","node_timeAggrSum":true,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_name":"CAPEX"},"SIM001_0034":{"node_scaling":"1k","node_decimals":"0","node_collapsed":true,"node_defColor":"1","node_bodyColor":"1","node_timeAggrSum":true,"node_showInGrid":true,"node_trafficCalcType":"3","node_population":"3","sim_Actual":"2","sim_Target":"2","sim_Budget":"2","sim_Forecast":"2","sim_Benchmark":"2","node_name":"NPV"}}`;

    function parseAndFormat(jsonString) {
      try {
        // Parse the main JSON string
        const parsedJSON = JSON.parse(jsonString);

        // Parse the nested heirTreeData field if it exists
        if (parsedJSON.heirTreeData) {
          parsedJSON.heirTreeData = JSON.parse(parsedJSON.heirTreeData);
        }

        // Format the entire JSON with indentation
        const formattedJSON = JSON.stringify(parsedJSON, null, 2);

        // Output the formatted JSON to the console
        console.log("Formatted JSON:");
        console.log(formattedJSON);

    // Display the parsed data in a readable format
    document.getElementById("jsonOutput").textContent = JSON.stringify(parsedJSON, null, 2);
  

      } catch (error) {
        // Handle parsing errors
        console.error("Error parsing JSON:", error.message);
      }
    }

    parseAndFormat(inputJSON);
  </script>
</body>
</html>
